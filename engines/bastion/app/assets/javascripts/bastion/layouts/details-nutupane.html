<section>
  <div data-block="messages" alch-alert success-messages="successMessages" error-messages="errorMessages"></div>

  <h4>
    <span data-block="header"></span>
  </h4>

  <div>
    <span data-block="filters"></span>
  </div>

  <div class="row nutupane-bar">
    <div class="col-sm-3">
      <div data-block="search">
        <div class="input-group input-group">
          <input type="text"
                 class="form-control"
                 placeholder="{{ 'Search...' | translate }}"
                 ng-model="detailsTable.searchTerm"
                 on-enter="detailsTable.search(detailsTable.searchTerm)"/>
          <span class="input-group-btn">
            <button ng-click="detailsTable.search(detailsTable.searchTerm)" class="btn btn-default" type="button"><i class="icon-search"></i></button>
          </span>
        </div>
      </div>
    </div>

    <div class="col-sm-3">
      <span class="nutupane-info" data-block="result-count" translate>Showing {{ detailsTable.rows.length }} of {{ detailsTable.resource.subtotal }} ({{ detailsTable.resource.total }} Total)</span>
    </div>

    <div class="col-sm-4 fr">
      <div class="fr">
        <span class="nutupane-info fl" data-block="selection-summary">
          <span translate>{{ detailsTable.numSelected }} Selected</span>
          <span>|</span>
          <a class="deselect-action"
             translate
             ng-class="{ 'disabled-link' : detailsTable.numSelected == 0 }"
             ng-click="detailsTable.selectAllResults(false)">
            Deselect All
          </a>
        </span>

        <span class="fl">
          <span data-block="actions"></span>
        </span>
      </div>
    </div>

  </div>

  <div class="nutupane" alch-table="detailsTable" nutupane-table>

    <div alch-container-scroll alch-infinite-scroll="detailsTable.nextPage()"
         data="detailsTable.rows" skip-initial-load="!detailsTable.initialLoad">

      <div class="nutupane-select-all" ng-show="detailsTable.selectAllResultsEnabled && detailsTable.allSelected() && !detailsTable.allResultsSelected">
        <span translate>All {{ detailsTable.rows.length }} items on this page are selected.</span>
        <a ng-click="detailsTable.selectAllResults(true)" translate>Select all {{ detailsTable.resource.subtotal }}.</a>
      </div>

      <div class="nutupane-select-all-selected" ng-show="detailsTable.selectAllResultsEnabled && detailsTable.allResultsSelected">
        <span translate>{{ detailsTable.allResultsSelectCount() }} results are selected.</span>
        <a ng-click="detailsTable.selectAllResults(false)" translate>Deselect all</a>
      </div>

      <div data-block="table"></div>

      <div class="text-center col-md-12 loading-indicator icon-3x" ng-show="detailsTable.working">
        <i class="icon-spinner icon-spin"></i>
        <span class="h1" translate>Working...</span>
      </div>
    </div>
  </div>

</section>
