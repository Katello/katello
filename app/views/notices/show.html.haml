= include_javascripts :notices_list
= include_javascripts :fancyqueries
= include_stylesheets :fancyqueries

.grid_16#main

  .prefix_11
    %form#search_form.search{"data-url" => search_index_path()}
      = auto_complete_field_tag_jquery(:search, params[:search], {:type => "text", :placeholder => "Filter..."},{ :delay => 100, :min_length => -1 })
      %button.action{:form => "search_form"} #{_("Search")}

  = help_tip_button
  = help_tip(_("User notifications lists all notifications generated by a user as well as global notifications that are sent to all users."))   |
  %h2.help_tip_button
    = _("User Notifications")

  %div#dialog_content{:style => "word-wrap: break-word;"}

  %table.notifications
    %thead
      %th
        = sortable "created_at", _("Created (UTC)")
      %th
        = sortable "level", _("Level")
      %th
        = sortable "text", _("Description")
    %tbody
      - for notice in @notices
        - if notice.details.nil?
          %tr{:class => "#{notice.level}"}
            %td #{notice.created_at}
            %td #{notice.level}
            %td= "#{notice.text}".html_safe
        - else
          %tr.details{:id => "#{notice.id}", :class => "#{notice.level}"}
            %td #{notice.created_at}
            %td #{notice.level}
            %td.details-icon= "#{notice.text}".html_safe

  = button_to _("Delete All"), {:action => "destroy_all", :controller => "notices"}, :method => :delete, :confirm => _('Are you sure?')

