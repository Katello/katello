= javascript :content

= javascript do
  :javascript
    localize({
      "cancel": '#{escape_javascript(_('Cancel'))}',
      "cancelled": '#{escape_javascript(_("Sync Cancelled"))}',
      "error": '#{escape_javascript(_('Error'))}',
      "complete": '#{escape_javascript(_('Sync complete.'))}'
    });

    KT.repo_status = $.parseJSON('#{escape_javascript(status_obj.to_json)}');

#main.grid_16

  %h2 #{_("Sync Status") }
  = form_tag("sync", :method => :post, :remote => true, :id => 'sync_product_form') do
    = hidden_field_tag 'sync_status_url', nil, 'data-url' => sync_management_sync_status_path
    %table#products_table
      %thead
        %th #{_("Product")}
        %th.max_width #{_("Start Time")}
        %th.max_width  #{_("Duration")}
        %th #{_("Size (Packages)")}
        %th #{_("Result")}
      %tbody
        = render :partial=>"product", :collection=>@product_map, :as=>:prod



    #list_actions
      - if @sproducts.length > 0
        .grid_2
          %a#select_none.fl
            #{_("Select None")}
        .grid_2
          %a#select_all.fl
            #{_("Select All")}
      #sync_toggle_cont.grid_3
        %input#sync_toggle{:type=>'checkbox'}
        %label{:for=>"sync_toggle"}
          #{_('Only show syncing.')}


      -#.grid_3
      -#  %a{:id=>"toggle_all", :class=>"fl" }
      -#    #{_("Expand/Contract All")}
      - if @sproducts.length > 0
        = submit_tag _('Synchronize Now'), :class => 'dialogbutton fr', :id => 'sync_button'
