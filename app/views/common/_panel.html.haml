= javascript :panel, :fancyqueries, :form
= stylesheet :fancyqueries

#container
  .right
    -if actions
      = render :partial=>actions
    -else
      .panel_action{'data-id'=>"select_none"}
        #select-result
        %a#select-none #{_("Select None")}
  = render :partial=>"common/tupane"

  %div.left{:class => left_panel_width ? left_panel_width : 'column_panel_' + columns.length.to_s }
    #list-title
      %header
        %h2.fl #{title}
        - if enable_create
          %a.fr{:href => "#", :id => "new", :class => "block", "data-ajax_url" => url_for(:action=> 'new')}
            #{_('+ New ')} #{create}
            .arrow-right
      %div.fl.clear#items_count
        #{_("viewing")}
        %span#current_items_count
          = 0
        #{_(" of  ")}
        %span#total_items_count
          = 0
        %span
          #{_(" results ")} (
          %span#total_results_count
            = 0
          #{_(" Total ")} #{title} )
                
      - if url.nil?
        %form#search_form.search{"data-url" => search_index_path()}
          = text_field_tag(:search, params[:search], {:type => "text", :placeholder => "Filter...", :class => "auto_complete_input ui-autocomplete-input"})
          %button.action{:form => "search_form", :id => "search_button"} #{_("Search")}
      - else
        %form#search_form.search{"data-url" => url_for(url)}
          = text_field_tag(:search, params[:search], {:type => "text", :placeholder => "Filter...", :class => "auto_complete_input ui-autocomplete-input"})
          %button.action{:form => "search_form", :id => "search_button"} #{_("Search")}

    #list.list.clear.expand_list{:class=>("ajaxScroll" if ajax_scroll), "data-scroll_url"=>ajax_scroll, "data-page_size"=>current_user.page_size}
      %header
        .block_head.clear
          - for col in columns
            %div{:class => 'column_' + columns.length.to_s}
              -if enable_sort 
                = sort(col.to_s.sub(/[_]/, " "))
              -else
                = col.to_s.sub(/[_]/, " ")
      - if ajax_load
        .spinner
          = image_tag ("spinner.gif")
        %section.hidden
      - elsif custom_rows
        %section
          = render_rows(:collection=>collection, :columns=>columns, :accessor=>accessor, :name=>name)
      - else
        %section
          = render :partial=>"common/list_item", :collection=>collection, :as=>:item, :locals=>{:accessor=>accessor, :columns=>columns, :name=>name, :initial_action=>initial_action}

    %br.clear
