= javascript :panel, :fancyqueries, :bbq
= stylesheet :fancyqueries

#container
  .right
    - if enable_create
      %h4
        #{_("Click New to create a new")} #{name}
    %br
    %br
    %h4
    #{_('Select Result')}:
    %br
    #select-result
  = render :partial=>"common/tupane"

  %div.left{:class => left_panel_width ? left_panel_width : 'column_panel_' + columns.length.to_s }
    #list-title
      %header
        %h2.fl #{title}
        - if enable_create
          %a.fr{:href => "#", :id => "new", :class => "block", "data-ajax_url" => url_for(:action=> 'new')}
            #{_('+ New ')} #{create}
            .arrow-right
      -#%div
        -##{_("Viewing")}
        -#%span#current_items_count
        -##{_(" of ")}
        -#%span#total_items_count
                
      - if url.nil?
        %form#search_form.search{"data-url" => search_index_path()}
          = text_field_tag(:search, params[:search], {:type => "text", :placeholder => "Filter...", :class => "auto_complete_input ui-autocomplete-input"})
          %button.action{:form => "search_form", :id => "search_button"} #{_("Search")}
      - else
        %form#search_form.search{"data-url" => url_for(url)}
          = text_field_tag(:search, params[:search], {:type => "text", :placeholder => "Filter...", :class => "auto_complete_input ui-autocomplete-input"})
          %button.action{:form => "search_form", :id => "search_button"} #{_("Search")}

    #list.list.clear.expand_list{:class=>("ajaxScroll" if ajax_scroll), "data-scroll_url"=>ajax_scroll, "data-page_size"=>current_user.page_size}
      %header
        .block_head.clear
          - for col in columns
            %div{:class => 'column_' + columns.length.to_s}
              -if enable_sort 
                = sort(col.to_s.sub(/[_]/, " "))
              -else
                = col.to_s.sub(/[_]/, " ")
      - if ajax_load
        .spinner
          = image_tag ("spinner.gif")
        %section.hidden
      - elsif custom_rows
        %section
          = render_rows(:collection=>collection, :columns=>columns, :accessor=>accessor, :name=>name)
      - else
        %section
          = render :partial=>"common/list_item", :collection=>collection, :as=>:item, :locals=>{:accessor=>accessor, :columns=>columns, :name=>name}
    %br.clear
