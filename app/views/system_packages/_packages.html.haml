-# This view contains several lines that are commented (i.e. -#) out on purpose... They may be uncommented when package
-# updates are supported.

= javascript do
  :javascript
    localize({
      "x_of_y_packages" : function(x,y){ return '#{_("(Loaded %X of %Y Total)")}'.replace("%X", x).replace("%Y", y); }
      });

= javascript :filtertable, :form, :system_packages

= content_for :title do
  #{@system.name}

= content_for :navigation do
  = render_navigation(:items => systems_navigation, :expand_all => true, :level => 1)

= content_for :content do
  -#.grid_8.summary
    -#.summary_top
      -#.packages_icon
      -#.fl
        -#= image_tag("boxshadow.png")
      -#.summary_text.fl #{_("All Packages are up-to-date.")}

  - if packages.length > 0
    .grid_8
      = render :partial => "common/filter_table", :locals => {:filter_placeholder => _('Filter on loaded packages...')}
      = form_tag system_system_packages_path(@system.id), :id => "packages_form", :method => "post", :remote => true do
        %table.filter_table.packages.ajaxScroll{'data-system_id' => @system.id, 'data-total_packages' => total_packages}
          %thead
            %th{:colspan => 3}
              %a#package_sort{"data-sort"=>"asc", :class=>"ascending"}
                #{_("Name")}
            -#%th
              -##{_("Date Added")}
          %tbody
            -if editable
              %tr.no_sort.not_filtered
                %td{:colspan => 4}
                  %div#content_type
                  = radio_button_tag :perform_action, :packages, true
                  = label_tag _('Packages')
                  = radio_button_tag :perform_action, :package_groups, false
                  = label_tag _('Package Groups')

              %tr.no_sort.not_filtered
                %td{:colspan => 4}
                  %div#content_form
                    - help_text = _("Enter Selected Content...")
                    %input{:type=>'text', :id=>'content_input', :size=>'30', :placeholder => help_text, :title => help_text}
                    %a#add_content{:style => 'padding-left: 10px;'} #{_('+ Add')}
                    %a#remove_content{:style => 'padding-left: 10px;'} #{_('- Remove')}

            = render :partial => 'package_items', :locals => {:packages => packages}

      #list-spinner
        = image_tag("spinner.gif", :class=>"ajax_scroll")

  - else
    %p There are no packages to display.

= content_for :footer do
  .grid_8
    %a#more{:style => "padding-left: 20px;", "data-scroll_url"=>url_for(more_packages_system_system_packages_path(@system.id)), "data-page_size"=>current_user.page_size, "data-offset"=>offset, :class=>"fl"} #{_("Load %{n} More" % {:n => offset})}
    %span{:id => 'loaded_summary', :style => "padding-left: 20px;"}
      -##{"%{n} Loaded of %{t} Total" % {:n => offset, :t => total_packages}}

    - if editable
      .prefix_2.grid_6.ra
        -#= submit_tag _("Update"), :class => 'button', :id => 'update_packages', 'data-url' => system_system_packages_path(@system.id)
        = submit_tag _('Remove'), :class => 'button', :id => 'remove_packages', 'data-url' => remove_system_system_packages_path(@system.id)
